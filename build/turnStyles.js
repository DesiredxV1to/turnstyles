!function(){var t=function(t){var e;return function(n){return e||t(e={exports:{},parent:n},e.exports),e.exports}},e=t((function(t,e){t.exports=t=>{t.runEmote=function(t){if(!this.config.emojis)return;let e=t.text.split(" ");for(var n=0;n<e.length;n++){let t=this.getEmote(e[n]);t&&(e[n]=t)}t.text!==e.join(" ")&&this.addEmote(t.text,e.join(" "))},t.getEmote=function(t){let e=this.findEmote(t);if(!e)return!1;let n=this.findTwitchEmote(e);return n||(n=this.findBTTVEmote(e)),n},t.addEmote=async function(t,e){t.indexOf(":p")>-1&&(t=t.split(":p")[0]);let n=$(".chat .messages .message:last-of-type .text")[0];!n.innerHTML.indexOf(t)<0||(n.innerHTML=e)},t.findEmote=function(t){let e=t.split(":").join("").toLowerCase();return!(":"!==t[0]||":"!==t[t.length-1])&&e},t.findTwitchEmote=function(t){let e=this.twitchIcons[t];return!!e&&`<img src="https://static-cdn.jtvnw.net/emoticons/v2//${e}/static/light/1.0">`},t.findBTTVEmote=function(t){let e=this.bttvIcons[t];return!!e&&`<img src="https://cdn.betterttv.net/emote/${e}/1x">`},t.on("speak",t.runEmote)}})),n=t((function(t,e){t.exports=t=>{t.nextDJ=function(){if(this.config.nextdj)return $(".become-dj").length?(this.Log("nextdj: attempting jump"),void this.View().becomeDj()):this.Log("nextdj: no spot")},t.spinning=function(t){if(!this.config.nextdj)return;if(this.User().id!=t.user[0].userid)return;this.setConfig("nextdj",!1);let e="You've hopped on deck!",n="NextDJ has been disabled.";this.Notify({head:e,body:n}),this.Post({head:e,body:n})},t.autoQueue=function(t){if(!this.config.auto_q)return;let e=this.config.q_text;t.text.indexOf(e)>-1&&this.View().becomeDj()},t.on("add_dj",t.spinning),t.on(["update","rem_dj"],t.nextDJ),t.on(["speak","pmmed"],t.autoQueue)}})),o=t((function(t,e){t.exports=t=>{t.sendReminder=function(t){if(!this.config.timing.text)return;let e=parseInt(this.config.timing.post),n=`[${this.Room().name}] ${this.config.timing.text}`;t%e==0&&this.config.timing.text&&this.Chat(n)},t.on("heartbeat",t.sendReminder)}})),s=t((function(t,e){t.exports=t=>{t.autoBop=function(){if(this.bop&&clearTimeout(this.bop),!this.config.auto_b)return;const t=7*Math.random()*100;this.bop=setTimeout(()=>n(".awesome-button"),t)},t.on("newsong",t.autoBop)};const n=t=>{$(window).focus();const e={bubbles:!0,cancelable:!0,view:window},n=document.querySelectorAll(t)[0],o=new MouseEvent("click",e);return!n.dispatchEvent(o)}})),a=t((function(t,e){t.exports=t=>{t.setAfk=function(t,e,n){n||"is_afk"!=t||e&&this.config.afkstr&&this.isAfk()},t.isAfk=function(){this.config.afkstr&&this.Batch(this.config.afkstr)},t.getAfk=function(t){if(!this.config.is_afk)return;let e=this.config.afkstr.split(";;").map(t=>t.trim());!t.$self&&t.$ping?this.isAfk():t.$self&&!e.includes(t.text)&&(this.setConfig("is_afk",!1),this.Post({head:"Welcome Back!",body:"You're no longer AFK!"}))},t.on("speak",t.getAfk),t.on("update",t.setAfk)}})),i=t((function(t,e){t.exports=t=>{t.songStats=function(t){let e=this.last_played;this.config.alerts.song&&t&&this.Post({head:t,body:`${e.song} by ${e.artist}`,type:"stat"})},t.djStats=function(t,e){this.config.alerts.spun&&this.Post({head:`${t} - ${e}`,body:" - is done spinning!",type:"stat"})},t.userStats=function(t){$(".profile.modal .statslink").length||($(".profile.modal .section.web-links").show(),$(".profile.modal .website").append(n(t)))},t.on("tracked",t.songStats),t.on("dropped",t.djStats),t.on("profile",t.userStats)};const n=t=>`\n  <a target="_blank" class="statslink" onclick="$('.modal .close-x')[0].click()"\n    href="https://thompsn.com/turntable/leaderboard/thing/?id=${t}">\n    Leaderboard\n  </a>\n`})),r=t((function(t,e){t.exports=t=>{t.notifyPMs=function(t){this.config.notify.chat&&this.Notify({head:"New PM "+(t.$from?"from: "+t.$from:""),body:t.text,type:"pm_ping"})},t.notifyDings=function(t){this.config.notify.ding&&t.$ping&&this.Notify({head:`[${this.view().roomData.name}] @${t.name}`,body:t.text,type:"chat_ping"}),this.notifyText(t)},t.notifySong=function(){let t=this.now_playing;this.config.notify.song&&t.song&&this.Notify({head:"Now Playing: "+t.song,body:"By: "+t.artist})},t.notifyText=function(t){let e=t.text.toLowerCase();if(this.config.notify.text.length<3)return;let n=this.config.notify.text.toLowerCase().split(",");for(let o of n)if(e.indexOf(o.trim())>-1)return $(".chat .messages .message:last-child").addClass("mention"),this.Notify({head:`Hot Word: "${o}"`,body:t.text})},t.alertSnags=function(t){this.config.alerts.snag&&this.Post({head:t.$name,body:"has snagged this track!",type:"snag"})},t.alertJoin=function(t){if(this.config.alerts.join)for(let e of t.user)this.Post({head:e.name,body:"joined.",type:"join"})},t.alertLeft=function(t){if(this.config.alerts.left)for(let e of t.user)this.Post({head:e.name,body:"left.",type:"left"})},t.on("pmmed",t.notifyPMs),t.on("speak",t.notifyDings),t.on("tracked",t.notifySong),t.on("snagged",t.alertSnags),t.on("registered",t.alertJoin),t.on("deregistered",t.alertLeft)}})),l=t((function(t,e){t.exports=t=>{t.bindPlaylist=function(){this.countPlaylist(),this.checkPlaylist(),this.classes("played",this.config.played)},t.countPlaylist=function(){let t=$("#playlist-header .text")[0],e=window.playlist.fileids.length,n=t.innerHTML.split("<em>")[0];t.innerHTML=`${n} <em>${e}</em>`},t.checkPlaylist=function(){if($(".song.ts_played").removeClass("ts_played"),!this.config.played)return;let t=this.Room().metadata.songlog;$("#queue .songs .song").each((function(){let e=$(this),n=e.find(".title").text(),o=e.find(".details").text().split(" \u2022 ")[0];for(let s of t){let{song:t,artist:a}=s.metadata;t==n&&a==o&&e.addClass("ts_played")}}))},t.updatePlaylist=function(t,e){"played"==t&&this.classes("played",e)},t.on("update",t.updatePlaylist),t.on("playlist",t.countPlaylist),t.on(["tracked","playlist"],t.checkPlaylist)}})),c=t((function(t,e){t.exports=t=>{t.qtbtns=function(t){let e=this.config.qtbtns["qtbtn"+t];e&&(e.indexOf("||")>-1&&(e=e.split("||")[1].trim()),this.Batch(e))},t.qtbtn1=function(){this.qtbtns("1")},t.qtbtn2=function(){this.qtbtns("2")},t.qtbtn3=function(){this.qtbtns("3")}}})),d=t((function(t,e){t.exports=t=>{t.fadeNewSong=function(t){let e=$(t).children(".message").last(),n=e.has(".avatar").length,o=e[0].innerText.includes("started playing");!n&&o&&e.addClass("stat")},t.addTimeStamp=function(t){if(!this.config.stamps)return;let e=$(".chat .messages .message:last-of-type"),n=0===e[0].innerText.indexOf(t.name),o=e.has(".timestamp").length;if(n&&!o){let t=this.now().split(":").slice(0,2).join(":");e.prepend(`<div class="timestamp">${t}</div>`)}},t.on("speak",t.addTimeStamp),t.on("newchat",t.fadeNewSong)}})),f=t((function(t,e){t.exports=t=>{const e=t=>Math.log(t/100)/Math.LN2+4,o=t=>{let e=t||window.util.getSetting("volume");return 100*Math.pow(2,e-4)};t.loadVolume=function(){let t=this.config.volume,e=$("body").hasClass("ts_vol");this.classes("ts_vol",t);let n=window.turntablePlayer.realVolume;this.realVolume||(this.realVolume=n),t&&!e&&this.addVolume(),e&&!t&&this.remVolume()},t.addVolume=function(){$(".header-content").append(n(o())),$("#tsMute").on("click",this.muteVolume.bind(this)),$("#tsSlider").on("input",this.saveVolume.bind(this)),$("#tsSlider").on("DOMMouseScroll mousewheel",this.rollVolume.bind(this))},t.remVolume=function(){$("#tsVolume").remove(),window.turntablePlayer.realVolume=this.realVolume},t.saveVolume=function(t){let n=(t=t.target?t.target.value:t)>0?e(t):-7,s=n<7?o:this.realVolume;window.turntablePlayer.realVolume=s,window.turntablePlayer.setVolume(n),window.util.setSetting("volume",n)},t.rollVolume=function(t){let e=o(),n=t.originalEvent.deltaY>0,s=t.originalEvent.shiftKey?1:5,a=n?e-s:e+s;return a=a<0?0:a>100?100:a,$("#tsSlider")[0].value=a,this.saveVolume(a),!1},t.muteVolume=function(){this.muted=!this.muted,this.classes("ts_muted",this.muted);let t=this.muted?-3:e(o());window.turntablePlayer.setVolume(t),this.Log("turned mute "+(this.muted?"on":"off"))},t.checkMuted=function(){this.muted&&this.muteVolume()},t.fixMusic=()=>{let t=window.youtube,e=window.soundcloudplayer;e.song&&(e.songTime=e.player.currentTime()/1e3,e.previewStartTime=Date.now()-1e3,e.resumeSong(e.song)),t.song&&(t.songTime=t.player[0].getCurrentTime(),t.previewStartTime=Date.now()-3e3,t.resumeSong(t.song)),$("#tsPanel").removeClass("active")},t.on("attach",t.loadVolume),t.on("update",t.loadVolume),t.on("nosong",t.checkMuted),t.on("newsong",t.checkMuted)};const n=t=>`\n  <div id="tsVolume">\n    <span id="tsMute"></span>\n    <input id="tsSlider" type="range" min="0" max="100" value="${t}">\n    <em id="tsMuted">Muted For One Song</em>\n  </div>\n`})),h=t((function(t,e){t.exports=t=>{t.loadClasses=function(t){this.classes("logger",t.logger),this.classes("no_bub",!t.bubble),this.classes("no_aud",!t.people),this.classes("no_vid",!t.player),this.classes("hb-is_afk",!t.hotbar.is_afk),this.classes("hb-auto_b",!t.hotbar.auto_b),this.classes("hb-auto_q",!t.hotbar.auto_q),this.classes("hb-nextdj",!t.hotbar.nextdj),this.classes("hb-bubble",!t.hotbar.bubble),this.classes("hb-people",!t.hotbar.people),this.classes("hb-shared",!t.hotbar.shared),this.classes("hb-player",!t.hotbar.player),this.classes("hb-qtbtn1",!t.hotbar.qtbtn1),this.classes("hb-qtbtn2",!t.hotbar.qtbtn2),this.classes("hb-qtbtn3",!t.hotbar.qtbtn3)},t.updateClasses=function(t,e,n){"bubble"==t&&this.classes("no_bub",!e),"player"==t&&this.classes("no_vid",!e),"people"==t&&this.classes("no_aud",!e),"logger"==t&&this.classes("logger",e),"hotbar"==n&&("is_afk"==t&&this.classes("hb-is_afk",!e),"auto_b"==t&&this.classes("hb-auto_b",!e),"auto_q"==t&&this.classes("hb-auto_q",!e),"nextdj"==t&&this.classes("hb-nextdj",!e),"bubble"==t&&this.classes("hb-bubble",!e),"people"==t&&this.classes("hb-people",!e),"shared"==t&&this.classes("hb-shared",!e),"player"==t&&this.classes("hb-player",!e),"qtbtn1"==t&&this.classes("hb-qtbtn1",!e),"qtbtn2"==t&&this.classes("hb-qtbtn2",!e),"qtbtn3"==t&&this.classes("hb-qtbtn3",!e)),"hotbar"!=n&&"qtbtns"!=n||this.bindHotBar()},t.on("update",t.updateClasses)}})),u=t((function(t,e){t.exports=t=>{t.loadThemes=function(t){$("#ts_core, #ts_themes, #ts_styles, #ts_css").remove(),this.insert("turnStyles"),this.insert(t.theme,"themes"),this.insert(t.style,"styles"),this.inject(t.u_css),this.themed(t.theme)},t.updateThemes=function(t,e){"theme"==t&&this.themed(e),"theme"==t&&this.insert(e,"themes"),"style"==t&&this.insert(e,"styles"),"u_css"==t&&this.inject(e)},t.insert=function(t,e){let o=`${this.__base}${e?"/"+e:""}`,s=t?`${o}/${t}.css?v=${Math.random()}`:"#",a="ts_"+(e||"core"),i=$("#"+a);i.length?i.attr("href",s):document.head.append(n(a,s)),"#"!=s&&this.Log("inserted: "+s.split("?v")[0])},t.inject=function(t){let e=$("#ts_css");e.length?e[0].innerHTML=t:document.head.append(o(t)),t&&this.Log("injected: "+t)},t.themed=function(t){this.classes("th-none",!t);let e=$("body").data("theme");e&&$("body").removeClass("th-"+e),t&&$("body").addClass("th-"+t),$("body").data("theme",t)},t.on("update",t.updateThemes)};const n=(t,e)=>{let n=document.createElement("link");return n.id=t,n.type="text/css",n.rel="stylesheet",n.href=e,n},o=t=>{let e=document.createElement("style");return e.id="ts_css",e.type="text/css",e.innerHTML=t,e}})),b=t((function(t,e){t.exports=t=>{t.bindWindow=function(){$("#tsWindow").remove(),$("body").append(`<div id="tsWindow">${e()}</div>`),$("#tsClose").on("click",()=>$("#tsWindow").removeClass("active")),$("#tsWindow *[data-for]").on("click",this.saveConfig.bind(this)),$("#tsWindow *[data-opt]").on("change",this.saveConfig.bind(this)),$(".ts-tab").on("click",t=>{let e=t.target.dataset.tab;$("#tsWindow .active").removeClass("active"),$(`*[data-tab="${e}"]`).addClass("active")}),$("#tsBackup input").on("change",this.uploadData),$("#tsWindow").on("click",(function(t){t.target==this&&$("#tsWindow").removeClass("active")}))};const e=()=>`\n    <div id="tsConfig">\n      <nav>\n        <h2><span id="tsClose">\u2716</span>turnStyles</h2>\n        ${t.tabs.map(t=>`\n            <div data-tab="${t}" \n              class="ts-tab ${"General"==t?"active":""}">\n              ${t}\n            </div>`).join("")}\n      </nav>\n      ${t.tabs.map(e=>t.tabbed[e]()).join("")}\n    </div>\n  `}})),p=t((function(t,e){t.exports=t=>{t.bindHotBar=function(){$("#tsHotBar").remove(),$(".header-bar").append(e()),$("#tsOpen").on("click",()=>$("#tsWindow").addClass("active")),$("#tsHotBar *[data-for]").on("click",this.saveConfig.bind(this)),$("#tsHotBar *[data-opt]").on("change",this.saveConfig.bind(this))};const e=()=>`\n    <div id="tsHotBar">\n      ${t.$button("\u2630",!1,"tsOpen")}\n      ${t.$toggle("is_afk","AFK",!1,"hbIsAfk")}\n      ${t.$toggle("auto_b","Autobop",!1,"hbAutoB")}\n      ${t.$toggle("auto_q","AutoQueue",!1,"hbAutoQ")}\n      ${t.$toggle("nextdj","Next DJ",!1,"hbNextDJ")}\n\n      ${t.$qtbtn("1")} ${t.$qtbtn("2")} ${t.$qtbtn("3")}\n\n      ${t.$toggle("bubble","Bubbles",!1,"hbBubbles")}\n      ${t.$toggle("people","People",!1,"hbPeople")}\n      ${t.$toggle("player","Player",!1,"hbPlayer")}\n      ${t.$button("Share",!1,"hbShare","Share")}\n    </div>\n  `}})),g=t((function(t,e){t.exports=t=>{t.tabs=["General","Visual","Hotbar","Alerts","Support","Share"],t.tabbed={General:()=>n("General",`\n      <h3>Automate</h3>\n      <h5>${t.$toggle("auto_b","Enable Autobop")}</h5>\n      <p>Vote "Awesome" after every new song starts, automatically!</p>\n\n      <h5>${t.$toggle("nextdj","Take Next DJ Spot")}</h5>\n      <p>turnStyles will attempt to add you as a DJ when a spot becomes available.</p>\n\n      <h5>${t.$toggle("auto_q","Enable AutoQueue")}</h5>\n      ${t.$string("q_text","Save Queue Ping")}\n      <p>For bots with a queue: Paste your queue ping above to auto DJ on ping!</p>\n\n      <h3>General</h3>\n      <h5>${t.$toggle("is_afk","Currently AFK")}</h5>\n      ${t.$string("afkstr","Save AFK Response")}\n      <p>Sends the AFK Response when you go AFK, and when you're pinged while AFK.</p>\n\n      <h5>${t.$toggle("volume","Override Volume")}</h5>\n      <p>Move volume controls out of the menu, and adds Mute For One Song.</p>\n    `,!0),Visual:()=>n("Visual",`\n      <h3>Theme/Style</h3>\n      ${t.$select("theme")}\n      ${t.$select("style")}\n\n      <h3>Visual Tweaks</h3>\n      <h5>${t.$toggle("played","Show Recently Played")}</h5>\n      <p>Highlights songs in playlist that were recently played in the room.</p>\n\n      <h5>${t.$toggle("stamps","Add Timestamps To Chat")}</h5>\n      <p>Adds a timestamp to the right of room chat messages.</p>\n\n      <h5>${t.$toggle("emojis","Use Twitch/BTTV Emojis")}</h5>\n      <p>Use the <strong>:emoji:</strong> format to access external emojis.<br>\n      <em>note: can only be seen by other turnStyles users!</em><br>\n      <em>note: using this disables the :P emoji!</em></p>\n\n      <h3>Turntable</h3>\n      ${t.$toggle("bubble","Show Chat Bubbles")}\n      ${t.$toggle("people","Show Room Audience")}\n      ${t.$toggle("player","Show Video Player")}\n\n      <h3>Custom CSS</h3>\n      ${t.$field("u_css","Save & Apply Styles")}\n      <p>Add your own custom CSS snippets to turntable!</p>\n    `),Hotbar:()=>n("Hotbar",`\n      <h3>QuickText</h3>\n      <h5>${t.$toggle("qtbtn1","Enable QT 1","hotbar")}</h5>\n      ${t.$string("qtbtn1","Save QT 1","qtbtns")}\n      <p>Send your most common messages at the push of a button!</p>\n\n      <h5>${t.$toggle("qtbtn2","Enable QT 2","hotbar")}</h5>\n      ${t.$string("qtbtn2","Save QT 2","qtbtns")}\n      <p>Prefix with <strong>label || </strong> to add a button label!</p>\n      <kbd>hello || hello world!</kbd>\n\n      <h5>${t.$toggle("qtbtn3","Enable QT 3","hotbar")}</h5>\n      ${t.$string("qtbtn3","Save QT 3","qtbtns")}\n      <p>Send multiple by adding <strong>;;</strong></p>\n      <kbd>welcome || Hello! || Rules! || Gif!</kbd>\n\n      <h3>Show In Hotbar</h3>\n      ${t.$toggle("is_afk","AFK","hotbar")}\n      ${t.$toggle("auto_b","Autobop","hotbar")}\n      ${t.$toggle("auto_q","AutoQueue","hotbar")}\n      ${t.$toggle("nextdj","Next DJ","hotbar")}\n      ${t.$toggle("bubble","Chat Bubble Toggle","hotbar")}\n      ${t.$toggle("people","Audience Toggle","hotbar")}\n      ${t.$toggle("player","Player Toggle","hotbar")}\n      ${t.$toggle("shared","Share turnStyles","hotbar")}\n    `),Alerts:()=>n("Alerts",`\n      <h3>Hot Words</h3>\n      ${t.$string("text","Save Hot Words","notify")}\n      <p>Desktop Notifications/Highlight Message on word match in chat. Use more than one in a comma separated list.</p>\n\n      <h3>Notify</h3>\n      ${t.$toggle("chat","On New PM","notify")}\n      ${t.$toggle("ding","On New Mention","notify")}\n      ${t.$toggle("song","On New Songs","notify")}\n      <p>Send Desktop Notifications</p>\n\n      <h3>Alerts</h3>\n      ${t.$toggle("song","Last Song Stats","alerts")}\n      ${t.$toggle("spun","Last DJ Stats","alerts")}\n      ${t.$toggle("snag","Song Snags","alerts")}\n      ${t.$toggle("join","On User Join","alerts")}\n      ${t.$toggle("left","On User Leave","alerts")}\n      <p>Alerts show up in room chat but are only visible to you.</p>\n\n      <h3>Reminder</h3>\n      ${t.$select("remind","timing")}\n      ${t.$string("text","Save Reminder","timing")}\n      <p>Sends Reminder to room at the selected interval! Useful for themes, rules, whatever you like!</p>\n    `),Support:()=>n("Support",`\n      <h3>Debug</h3>\n      ${t.$toggle("debug","Print Logs In Console")}\n      ${t.$toggle("logger","Show Logs In Room Tab")}\n      <div style="width: 0px;height: 10px;"></div>\n      ${t.$button("Reload turnStyles",!1,!1,"reload")}\n      ${t.$button("Reload Players",!1,!1,"reloadMusic")}\n\n      <h3>turnStyles Data</h3>\n      ${t.$button("Backup",!1,!1,"backupData")}\n      <label id="tsBackup" class="ts-button"><input type="file">Restore</label>\n      ${t.$button("Reset",!1,!1,"resetData")}\n      ${t.$button("Delete",!1,!1,"deleteData")}\n\n      <h3>Support</h3>\n      <a href="https://discord.gg/wqmAVvgSbE" class="ts-button" target="_blank">turnStyles Discord</a>\n      <a href="https://discord.gg/jnRs4WnPjM" class="ts-button" target="_blank">turntable.fm Discord</a>\n\n      <h3>Author</h3>\n      <em>turnStyles v${t.config.version}<em><br />\n      <strong>@crisis</strong> on Discord<br />\n      <strong>@crisis</strong> on Turntable<br />\n      <a target="_blank" href="https://patreon.com/pixelcrisis">patreon.com/pixelcrisis</a><br />\n      <em>Request Themes & More on Patreon!</em>\n    `),Share:()=>n("Share",`\n      <h3>Post To Chat</h3>\n      ${t.$button("Share turnStyles in chat!",!1,!1,"Share")}\n\n      <h3>Links</h3>\n      <a href="https://chrome.google.com/webstore/detail/turntable-tweaks/pmlkackfnbbnjfejpddpakallilkbdme" class="ts-button" target="_blank">Chrome / Opera</a>\n      <a href="https://addons.mozilla.org/en-US/firefox/addon/turnstyles-for-turntable-fm/" class="ts-button" target="_blank">Firefox</a>\n      <a href="https://ts.pixelcrisis.co" class="ts-button" target="_blank">Bookmarklet</a>\n      <a href="https://ts.pixelcrisis.co" class="ts-button" target="_blank">Beta</a>\n\n      <h3>Author</h3>\n      <em>turnStyles v${t.config.version}<em><br />\n      <strong>@crisis</strong> on Discord<br />\n      <strong>@crisis</strong> on Turntable<br />\n      <a target="_blank" href="https://patreon.com/pixelcrisis">patreon.com/pixelcrisis</a><br />\n      <em>Request Themes & More on Patreon!</em>\n    `)}};const n=(t,e,n)=>`\n  <div class="ts-tabbed ${n?"active":""}" \n    data-tab="${t}">${e}</div>\n`})),m=t((function(t,e){t.exports=t=>{t.$button=(t,e,n,o)=>`\n    <button class="ts-button" ${n?`id="${n}"`:""}\n      ${e?`data-for="${e}"`:""}\n      ${o?`onclick="$tS.${o}()"`:""}>\n      ${t}\n    </button>\n  `,t.$toggle=function(t,e,o,s){return`\n    <label class="ts-toggle" ${s?`id="${s}"`:""}>\n      <input type="checkbox" \n        data-opt="${t}" data-cat="${o||""}"\n        ${n(this.config,t,o)?"checked":""} />\n      <span></span> ${e}\n    </label>`},t.$string=function(t,e,o){return`\n    <input type="text" class="ts-inputs"\n      data-opt="${t}" data-cat="${o||""}"\n      value="${n(this.config,t,o)}" />\n    ${this.$button(e,t)}`},t.$field=function(t,e,o){return`\n    <textarea class="ts-inputs" rows="10"\n      data-opt="${t}" data-cat=${o||""}>\n      ${n(this.config,t,o)}\n    </textarea>\n    ${this.$button(e,t)}`},t.$select=function(t,e){return`\n    <select class="ts-choice"\n      data-opt="${t}" data-cat="${e||""}">\n      <option value="">No ${this.cap(t)}</option>\n      ${o(this.options,this.config,t,e)}\n    </select>`},t.$qtbtn=function(t){let e="qtbtn"+t,n=this.config.qtbtns[e],o="QT"+t;return n.indexOf("||")>-1&&(o=(n=n.split("||")).shift(),n=n.join(" ")),this.$button(o,!1,e,e)}};const n=function(t,e,n){return n?t[n][e]:t[e]},o=function(t,e,o,s){let a=n(e,o,s);return Object.keys(t[o]).map(e=>{let n=t[o][e];return`<option value="${e}" ${e==a?"selected":""}>${n}</option>`}).join("")}})),y=t((function(t,e){t.exports=t=>{t.readConfig=function(){let t=this.__sync||{},e=window.localStorage.getItem("tsdb");return e=e?JSON.parse(e):{},"theme"in t&&this.Log("loaded addon db"),"theme"in e&&this.Log("loaded local db"),{...t,...e}},t.writeConfig=function(){let t=JSON.stringify(this.config);window.localStorage.setItem("tsdb",t),window.postMessage({tsdb:this.config})},t.initConfig=function(){if(this.__base)return;this.__base=window.tsBase,this.__sync=window.tsSync,this.__logo=this.__base+"/images/icon128.png";let t=this.readConfig(),e={...this.default,...t},n=w({}).version;this.config=this.migrate(e),this.config.version=n,this.config.is_afk=!1,this.Emit("loaded",this.config)},t.saveConfig=function(t){let e=t.target.dataset;if(!e.opt&&!e.for)return;let n=e.for||e.opt,o="checkbox"==t.target.type?t.target.checked:t.target.value;e.for&&(o=$(`*[data-opt="${n}"]`).val()),this.setConfig(n,o,e.cat),(!this.lobby||["style","theme","u_css","hotbar","macros"].includes(n))&&this.Emit("update",n,o,o.cat)},t.setConfig=function(t,e,n){n?this.config[n][t]=e:this.config[t]=e,this.writeConfig();let o="boolean"==typeof e;$(`*[data-opt="${t}"][data-cat="${n||""}"]`).prop(o?"checked":"value",e)}}})),w=t((function(t,e){t.exports={version:"10.6.3"}})),k=t((function(t,e){t.exports=t=>{t.initCache=function(t){this.current_djs={},this.now_playing={},this.last_played={},this.cacheSong(t.currentSong);for(let e of t.djids)this.cacheDJ(e)},t.cacheDJ=function(t){let e=t.user?t.user[0].userid:t;this.current_djs[e]||(this.current_djs[e]=n())},t.updateDJ=function(t){if(!t.song||!t.djid)return;let e=this.current_djs[t.djid],o=n(e,{...t,spun:1});this.current_djs[t.djid]=o},t.resetDJ=function(t){let e=t.user[0].userid,n=o(this.current_djs[e]);delete this.current_djs[e],this.Emit("dropped",t.user[0].name,n)},t.cacheSong=function(t){let e=t&&t.room?t.room.metadata.current_song:t,n=t&&t.upvoters?t.upvoters.length:0,s=!!e&&e.djid,a={...this.now_playing},i={djid:s,love:n,hate:0,snag:0},r=e?{...e.metadata,...i}:{};this.now_playing=r,this.last_played=a,this.updateDJ(a);let l=r.song||"none";this.Log("new song: "+l),this.Emit("tracked",o(a))},t.cacheVote=function(t){this.now_playing.love=t.room.metadata.upvotes,this.now_playing.hate=t.room.metadata.downvotes},t.cacheSnag=function(){this.now_playing.snag+=1},t.on("attach",t.initCache),t.on("add_dj",t.cacheDJ),t.on("rem_dj",t.resetDJ),t.on("snagged",t.cacheSnag),t.on("update_votes",t.cacheVote),t.on(["nosong","newsong"],t.cacheSong)};const n=(t,e)=>{let n={spun:0,love:0,hate:0,snag:0};for(let o in t||{})o in n&&(n[o]+=t[o]);for(let o in e||{})o in n&&(n[o]+=e[o]);return n},o=(t={},e="")=>("love"in t&&(e+=t.love+"\u2764\ufe0f"),"hate"in t&&(e+=t.hate+"\ud83d\udc94"),"snag"in t&&(e+=t.snag+"\ud83d\udc96"),"spun"in t&&(e+=t.spun+"\u25b6\ufe0f"),e)})),v=t((function(t,e){t.exports=t=>{t.resetData=function(){window.confirm(n)&&this.updateData(this.default)},t.deleteData=function(){window.confirm(o)&&(window.localStorage.removeItem("tsdb"),window.localStorage.setItem("ts-reset",!0),window.location.reload())}};const n='WARNING: You\'re about to reset your turnStyles Data! \nClicking "OK" will reset turnStyles to default and reload the extension!\nClick "CANCEL" if this is not what you intended to do!',o='WARNING: You\'re about to DELETE the turnStyles DATABASE!\nTHIS WILL RELOAD THE WEB PAGE! USE AS A LAST RESORT!\nClick "OK" to delete the turnStyles DB and start over!\nClick "CANCEL" to go back to turntable!'})),x=t((function(t,e){t.exports=t=>{t.backupData=function(){let t=JSON.stringify(this.config),e=new Blob([t],{type:"text/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,"tsdb.json");else{let t=window.document.createElement("a");t.href=window.URL.createObjectURL(e),t.download="tsdb.json",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},t.uploadData=function(){let e=$("#tsBackup input")[0].files[0];if(!e)return alert("Select Backup File First");let n=new FileReader;n.onload=t.restoreData,n.readAsText(e)},t.restoreData=function(e){let n=JSON.parse(e.target.result);n.hotbar&&n.people?t.updateData(n):alert("Error Reading Backup File")},t.updateData=function(t){t=t||{};for(let n in t)this.config[n]=t[n];let e=JSON.stringify(this.config);window.localStorage.setItem("tsdb",e),this.reload()}}})),_=t((function(t,e){t.exports=t=>{t.migrate=function(t){for(let e of n)t=e(t);return t}};const n=[function(t){return o(t,{user_css:{map:"u_css"},autobop:{map:"auto_b"},logging:{map:"logger"},has_vol:{map:"volume"},q_ping:{map:"q_text"},afk_ping:{map:"afkstr"},no_aud:{map:"people",flip:!0},no_vid:{map:"player",flip:!0},no_bub:{map:"bubble",flip:!0},ping_pm:{map:"chat",cat:"notify"},ping_song:{map:"song",cat:"notify"},ping_chat:{map:"ding",cat:"notify"},hot_words:{map:"text",cat:"notify"},chat_song:{map:"song",cat:"alerts"},chat_spun:{map:"spun",cat:"alerts"},chat_snag:{map:"snag",cat:"alerts"},chat_join:{map:"join",cat:"alerts"},chat_left:{map:"left",cat:"alerts"},beats:{map:"beat",cat:"timing"},remind:{map:"post",cat:"timing"},reminder:{map:"text",cat:"timing"}})}],o=function(t,e){for(let n in e){let{map:o,cat:s,flip:a}=e[n];if(n in t){let e=a?!t[n]:t[n];s?t[s]?t[s][o]=t[n]:t[s]={[o]:t[n]}:t[o]=e,delete t[n]}}return t}})),S=t((function(t,e){t.exports=t=>{t.twitchIcons={jkanstyle:15,optimizeprime:16,stonelightning:17,theringer:18,redcoat:22,kappa:25,joncarnage:26,mrdestructoid:28,bcwarrior:30,gingerpower:32,dansgame:33,swiftrage:34,pjsalt:36,kevinturtle:40,kreygasm:41,ssssss:46,punchtrees:47,arsonnosexy:50,smorc:52,frankerz:65,onehand:66,bloodtrail:69,dbstyle:73,asianglow:74,biblethump:86,shazbotstix:87,pmstwin:92,fungineer:244,residentsleeper:245,"4head":354,hotpokket:357,failfish:360,daesuppy:973,wholewheat:1896,thunbeast:1898,tf2john:1899,ralpherz:1900,kippa:1901,keepo:1902,bigbrother:1904,sobayed:1906,peopleschamp:3412,grammarking:3632,panicvis:3668,anele:3792,brokeback:4057,pipehype:4240,youwhy:4337,ritzmitz:4338,elegiggle:4339,thething:7427,hassaanchop:20225,babyrage:22639,panicbasket:22998,permasmug:27509,buddhabar:27602,wutface:28087,prchase:28328,mau5:30134,heyguys:30259,notatk:34875,mcat:35063,ttours:38436,praiseit:38586,corgiderp:49106,argieb8:51838,shadylulu:52492,kappapride:55338,coolcat:58127,dendiface:58135,notlikethis:58765,ripepperonis:62833,dududu:62834,bleedpurple:62835,twitchraid:62836,seemsgood:64138,minglee:68856,kappaross:70433,kappaclaus:74510,ohmydog:81103,osfrog:81248,serioussloth:81249,komodohype:81273,vohiyo:81274,mikehogu:81636,kappawealth:81997,cmonbruh:84608,smoocherz:89945,nomnom:90075,stinkycheese:90076,cheffrank:90129,futureman:98562,opieop:100590,doritoschip:102242,pjsugar:102556,voteyea:106293,votenay:106294,rulefive:107030,dxcat:110734,drinkpurple:110785,tinyface:111119,picomause:111300,thetarfu:111351,datsheffy:111700,unsane:111792,copythis:112288,pastathat:112289,imglitch:112290,giveplz:112291,takenrg:112292,blargnaut:114738,dogface:114835,jebaited:114836,toospicy:114846,wtruck:114847,unclenox:114856,raccattack:114870,strawbeary:114876,primeme:115075,brainslug:115233,batchest:115234,curselit:116625,poooound:117484,freakinstinkin:117701,supervinlin:118772,trihard:120232,coolstorybob:123171,itsboshytime:133468,kapow:133537,youdontsay:134254,uwot:134255,rlytho:134256,partytime:135393,ninjagrumpy:138325,mvgame:142140,tbangel:143490,theilluminati:145315,morphintime:156787,thankegg:160392,begwan:160394,bigphish:160395,inuyoface:160396,kappu:160397,koncha:160400,punoko:160401,sabaping:160402,tearglove:160403,tehepelo:160404,twitchlit:166263,carlsmile:166266,crreamawk:191313,squid1:191762,squid2:191763,squid3:191764,squid4:191767,twitchunity:196892,tpcrunchyroll:323914,entropywins:376765,lul:425618,powerupr:425671,powerupl:425688,hscheers:444572,hswp:446979,darkmode:461298,twitchvotes:479745,tpfufun:508650,redteam:530888,greenteam:530890,purplestar:624501,fbtouchdown:626795,popcorn:724216,tombraid:864205,earthday:959018,partyhat:965738,mercywing1:1003187,mercywing2:1003189,pinkmercy:1003190,bisexualpride:1064987,lesbianpride:1064988,gaypride:1064991,transgenderpride:1064995,asexualpride:1130348,pansexualpride:1130349,twitchrpg:1220086,intersexpride:1221184,maxlol:1290325,nonbinarypride:1297279,genderfluidpride:1297281,fbrun:1441261,fbpass:1441271,fbspiral:1441273,fbblock:1441276,fbcatch:1441281,fbchallenge:1441285,fbpenalty:1441289,pixelbob:1547903,gunrun:1584743,holidaycookie:1713813,holidaylog:1713816,holidayornament:1713818,holidaypresent:1713819,holidaysanta:1713822,holidaytree:1713825,soonerlater:2113050,twitchsings:300116344,singsmic:300116349,singsnote:300116350,porschewin:300745158,bop:301428702,virtualhug:301696583,extralife:302426269,blacklivesmatter:302537250,football:302628600,footyellow:302628613,footgoal:302628617,showofhands:303564554,glitchcat:304486301,stinkyglitch:304486324,glitchlit:304489128,glitchnrg:304489309,pogchamp:305954156},t.bttvIcons={tf:"54fa8f1401e468494b85b537",cigrip:"54fa8fce01e468494b85b53c",datsauce:"54fa903b01e468494b85b53f",foreveralone:"54fa909b01e468494b85b542",gaben:"54fa90ba01e468494b85b543",hailhelix:"54fa90f201e468494b85b545",shoopdawhoop:"54fa932201e468494b85b555","m&mjc":"54fab45f633595ca4c713abc",bttvnice:"54fab7d2633595ca4c713abf",twat:"54fa935601e468494b85b557",watchusay:"54fa99b601e468494b85b55d",tehpolecat:"566ca11a65dbbdab32ec0558",angelthump:"566ca1a365dbbdab32ec055b",taxibro:"54fbefeb01abde735115de5b",brobalt:"54fbf00a01abde735115de5c",candianrage:"54fbf09c01abde735115de61",vislaud:"550352766f86a5b26c281ba2",karappa:"550b344bff8ecee922d2a3c1",fishmoley:"566ca00f65dbbdab32ec0544",hhhehehe:"566ca02865dbbdab32ec0547",kkona:"566ca04265dbbdab32ec054a",poledoge:"566ca09365dbbdab32ec0555",sosgame:"553b48a21f145f087fc15ca6",cruw:"55471c2789d53f2d12781713",rarepepe:"555015b77676617e17dd2e8e",hahaa:"555981336ba1901877765555",feelsbirthdayman:"55b6524154eefd53777b2580",ronsmug:"55f324c47f08be9f0a63cce0",kappacool:"560577560874de34757d2dc0",feelsbadman:"566c9fc265dbbdab32ec053b",burself:"566c9f3b65dbbdab32ec052e",concerndoge:"566c9f6365dbbdab32ec0532",feelsgoodman:"566c9fde65dbbdab32ec053e",firespeed:"566c9ff365dbbdab32ec0541",nam:"566ca06065dbbdab32ec054e",sourpls:"566ca38765dbbdab32ec0560",feelssnowman:"566dde0e65dbbdab32ec068f",feelssnowyman:"566decae65dbbdab32ec0699",lul:"567b00c61ddbe1786688a633",sosnowy:"567b5b520e984428652809b6",saltycorn:"56901914991f200c34ffa656",monkas:"56e9f494fff3cc5c35e5287e",vapenation:"56f5be00d48006ba34f530a4",ariw:"56fa09f18eff3b595e93ac26",notsquishy:"5709ab688eff3b595e93c595",feelsamazingman:"5733ff12e72c3c0814233e20",duckerz:"573d38b50ffbf6cc5cc38dc9",icecold:"5849c9a4f52be01a7ee5f79d",sqshy:"59cf182fcbe2693d59d7bf46",wowee:"58d2e73058d8950a875ad027",wubtf:"5dc36a8db537d747e37ac187",cvr:"5e76d2ab8c0f5c3723a9a87d",cvl:"5e76d2d2d112fc372574d222",cvhazmat:"5e76d338d6581c3724c0f0b2",cvmask:"5e76d399d6581c3724c0f0b8",dogchamp:"5ffdf28dc96152314ad63960",fubaldi:"5f1caf2d713a6144748a2372",baomn:"5f30ac02fe85fb4472d27d16",crawlers:"5f30ae9e6f37824466029865",checkers:"5f30afaa65fe924464efae58",kissapregomie:"5f30b03d6f37824466029880",pettheeddie:"5f30b0eacf6d2144653e6f92",solarflare:"5f30b6c865fe924464efaec9",petthebaldie:"5f30b844cf6d2144653e6fef",raremoon:"5f30b90ffe85fb4472d27dce",eddieknead:"5f30ba4ffe85fb4472d27dda",baldfloss:"5f30c16f6f37824466029992",coomtime:"5f30c24ccf6d2144653e70a1",humpers:"5f30cfc2713a6144748b5028",balddab:"5f30d8791ab9be446c4eb078",baldflick:"5f30d8e1cf6d2144653e71b8",eddiespin:"5f30df5b65fe924464efb0dd",feelsayayaman:"5f30e087713a6144748b50ce",bropls:"5f30e22865fe924464efb100",eddiebaldmansmash:"5f30ebbacf6d2144653e725a",moon2bass:"5f31e0f68abf185d76c680cf",sneakers:"5f3c69a6afb6965d6e7c100d",catjam:"5f41c91bf93bbe5d717f8a09",peepoboom:"5f4ef4c1aa6fe06bfb5f8df4",doubters:"5f5ad9080b77be6bfcad897e",eekum:"5f5c0dc468d9d86c020e58ec",moon2scoots:"5f6145b16084af6c171a58f9",baldyikes:"5f6937288d3e1b709d8e731c",speeders:"5f6e01ec239b210b0de66bca",baners:"5f76b04eccde1f4a870bf570",mariorun:"5f79098897f70a4a9be7f410",peeponarusprint:"5f790a01e016be4a882f04f5",flappers:"5f791fe1e9c9344a8f34f563",twerkers:"5f8a6c38473f4802fe4713c6",vibers:"5f8a6cdf710f8302f0c87068",baldspin:"5f8a6d0d6f583802e38905dd",pettheqynoa:"5fae06b5f32aa26441c89258",qynoalurks:"5fae06df4dfba1644029ccef",ayayajam:"5fb639f72d6c386f224a0679",notsure:"5fb640fc2d6c386f224a06cc",pepemetal:"5fb6414ff096f76f0d1bd1c0",peepogolfclap:"5fb64523f096f76f0d1bd1f6",soulshroom:"5fbc901de2900c6f07df72e6",pepelepsy:"5fc1a3660d141d6f06d87397",fcreep:"5fc86175e22688461fed94cd",tanties:"5ff0e2539d7d952e405a1e7c",shushers:"5ff0e27bbe65982e48cf1431",baldyappp:"5ff0e2c1be65982e48cf143e",monaks:"5ff0e34c3edf1a2e56b7af2a",deskchan:"5ff0e4299d7d952e405a1ec3",pepw:"5ff0e4c5f58a572e54214737",lgiggle:"5ff0e4faf58a572e54214743",shruggers:"5ff0e50f3edf1a2e56b7af83",pukers:"5ff0e51f5ae5852e41549e31",peepocheering:"5ff0e545f58a572e5421474e",prayge:"5ff0e5a1f58a572e5421475b",yappp:"5ff0e6a35ae5852e41549e5f",geckw:"5ff0e704be65982e48cf14dc",komodochomp:"5ff0e76cbe65982e48cf14e9",omegapoggers:"5ff120aaf58a572e54214def",peepeegachat:"5ff66346644cbf2fc687bff4",tinyteeth:"5ffd116a30e9273179cdc63f",feelsgoogman:"5ffd143ac12abd316340578a",hypernopers:"60016b8dc96152314ad671e5",hypernodders:"6001f12a3928fb3152de23a7",hyperpeepod:"60037536c96152314ad6956d",pepephoner:"600f796f6c75a765d463bdd4",peepersd:"60172c8b8a320865dcf41961",gamba:"60172ffbf1cfbf65dbe14586",vanish:"6032f4bf7c74605395f31f2b",copege:"6032fa797c74605395f31f5f",wicked:"6032fab47c74605395f31f61",hard:"603301507c74605395f31fa1",kissabrother:"603306de7c74605395f31fbb",teatime:"60333b0d7c74605395f320ea",teatime2:"60333b377c74605395f320ec",guitartime:"6033439f7c74605395f3210f",okayge:"603349ea7c74605395f32129",click:"60334fb57c74605395f32152",easy:"603461887c74605395f329e6",peeposteer:"6035a63a7c74605395f33357",gawkgawk:"605008f0306b602acc59dbb9",mahalo:"605a6e997493072efdeb3476",wowers:"6063a39fa407570b72f282c7",aaugh:"6063aa98a407570b72f28321",peepees:"6063b0c3a407570b72f2837a",noted:"60665f35a407570b72f296a0",robpls:"606fc2ce39b5010444cfbb8c",refracting:"609f0faf67644f1d67e86529",grumpge:"60a7548f67644f1d67e8a27f",eato:"60b44a3ff8b3f62601c35f26",deadlole:"60e10bf58ed8b373e421d4a8",corpa:"6121e47e76ea4e2b9f78a35f",peeposhy:"6126e9e8af28e956864a23bf",borpau:"612d6dc1af28e956864b0fac",slap:"6132f9c3af28e956864bd1b2",kachorpa:"6136f959af28e956864c563f",geckpog:"615b961fb63cc97ee6d4dc42",elyouel:"61871d291f8ff7628e6cc518",hunger:"61eb460806fd6a9f5be1a098",potl:"6222a4be06fd6a9f5be6348a"}}})),j=t((function(t,e){t.exports=t=>{t.default={debug:!1,theme:"dark",style:"",u_css:"",is_afk:!1,afkstr:"I'm AFK - Back in a sec!",people:!0,player:!0,bubble:!0,logger:!1,volume:!1,played:!1,stamps:!1,emojis:!0,auto_b:!0,nextdj:!1,auto_q:!1,q_text:"Hey @user - it's your turn!",notify:{song:!1,ding:!1,chat:!1,text:""},alerts:{song:!1,spun:!1,snag:!1,join:!1,left:!1},hotbar:{is_afk:!0,auto_b:!0,auto_q:!0,nextdj:!0,shared:!0,bubble:!1,people:!1,player:!1,qtbtn1:!1,qtbtn2:!1,qtbtn3:!1},qtbtns:{qtbtn1:"",qtbtn2:"",qtbtn3:""},timing:{beat:0,post:0,text:"Today's theme is: Cool."}},t.options={theme:{dark:"Dark Mode",night:"Night Mode",cosmic:"Cosmic",forest:"Forest",midnight:"Midnight"},style:{blue:"Blue",pink:"Pink",green:"Green",purple:"Purple",teal:"Teal"},remind:{0:"Don't Remind",15:"Every 15m",30:"Every 30m",60:"Every 1h",120:"Every 2h"}}}})),C=t((function(t,e){t.exports=t=>{t.attach=function(){this.initConfig();const e=window.turntable;if(!e)return this.Log("No room");const o=window.turntable.user;if(this.lobby=$("#turntable #topBG").length,this.lobby)return this.bindHotBar(),this.bindWindow(),!1;const s=()=>setTimeout(t.attach.bind(this),150);if(!o)return s();let a=n(e,"roomId");return a&&n(a,"roomData")?(this.listener=this.listen.bind(this),window.turntable.addEventListener("message",this.listener),this.Emit("attach",a),void this.Log("loaded room")):s()},t.reload=function(){clearInterval(this.heart),window.turntable.removeEventListener("message",this.listener),$('script[src*="turnStyles.js"]').remove();const t=document.createElement("script");t.src=`${this.__base}/turnStyles.js?v=${Math.random()}`,t.type="text/javascript",this.Log("reloading"),document.body.append(t)}};const n=(t,e)=>{for(let o in t)if(null!=(n=t[o])&&n[e])return t[o];var n}})),q=t((function(t,e){t.exports=t=>{t.Notify=function(t){if(!this.canNotify()||document.hasFocus())return;let{head:e,body:n,type:o}=t,s=this.__logo,a=()=>{let t=new Notification(e,{icon:s,body:n});t.onclick=()=>{window.focus(),t.close()}};return o?this.delay(a,5,o):a()},t.canNotify=function(){let t=this.config.notify;return!(!(t.chat||t.song||t.ding)||!("Notification"in window)||"denied"===Notification.permission||"default"===Notification.permission&&(this.Log("requesting notification permissions"),Notification.requestPermission(),1))},t.on("update",t.canNotify)}})),T=t((function(t,e){t.exports=t=>{t.Log=function(t){(!this.config||this.config.debug)&&console.info(`[${this.now()}] turnStyles :: ${t}`),this.addLog(`[tS - ${this.now()}]<span>${n(t)}</span>`)},t.addLog=function(t){this.logBook.push(t);let e=$("#tsLogs")[0];this.logBook.length>50&&this.logBook.shift(),e&&(e.innerHTML=this.logBook.reverse().join("<br />"),e.scrollTop=e.scrollHeight)},t.bindLogs=function(){$("#tsLogs").remove(),$(".room-info-nav").after('<div id="tsLogs"></div>')},t.on("update",(function(t,e){this.Log(`update: [${t}] to (${e})`)})),t.on("registered",(function(t){for(let e of t.user)this.Log(`[${e.name}](${e.userid}) joined.`)})),t.on("deregistered",(function(t){for(let e of t.user)this.Log(`[${e.name}](${e.userid}) left.`)})),t.on("add_dj",(function(t){let e=t.user[0].userid;this.Log(`add dj: [${this.findName(e)}](${e})`)})),t.on("rem_dj",(function(t){let e=t.user[0].userid;this.Log(`rem dj: [${this.findName(e)}](${e})`)})),t.on("update_votes",(function(t){let e=t.room.metadata.votelog,n=e[e.length-1];this.Log(`[${this.findName(n[0])}] voted: ${n[1]}`)})),t.logBook=[]};const n=t=>{if(0==t.indexOf("inserted:")){let e=t.split("/");return"inserted: "+e[e.length-1]}return t}})),L=t((function(t,e){t.exports=t=>{t.beat=function(){let t=parseInt(this.config.timing.beat)+1;this.config.timing.beat=t,this.Emit("heartbeat",t)},t.bindTimer=function(){this.holding={},this.heart=setInterval(t.beat.bind(this),6e4)},t.delay=function(t,e,n){if(this.holding||(this.holding={}),this.holding[n])return;let o=1e3*e;this.holding[n]=setTimeout((()=>{delete this.holding[n]}).bind(this),o),t&&t()}}})),E=t((function(t,e){t.exports=t=>{t.on=function(t,...e){this.events||(this.events={}),Array.isArray(t)||(t=[t]);for(let n of t){this.events[n]||(this.events[n]=[]);for(let t of e)this.events[n].push(t.bind(this))}},t.Emit=function(t,...e){let n=this.events[t];if(n)for(let o of n)o(...e)},t.listen=function(t){t.command&&(t.$ping=this.findPing(t.text),t.$name=this.findName(t.userid),t.$from=this.findName(t.senderid),t.$self=this.User().id==t.userid,this.Emit(t.command,t))},t.watcher=function(){new(window.MutationObserver||window.WebKitMutationObserver)((function(e){for(let n of e){let e=n.target;"songs"==e.className&&t.Emit("playlist"),"messages"==e.className&&t.Emit("newchat",e),"TITLE"==e.nodeName&&e.baseURI.indexOf("profile/")>-1&&t.Emit("profile",e.baseURI.split("profile/")[1])}})).observe(document,{subtree:!0,childList:!0})},t.on("attach",t.watcher)}})),A=t((function(t,e){t.exports=t=>{t.User=()=>window.turntable.user,t.View=()=>window.turntable.topViewController,t.Chat=()=>window.turntable.buddyList.pmWindows,t.Room=()=>window.turntable.topViewController.roomData,t.findName=function(t="Unknown"){let e=this.View().userMap[t];if(e)return e.attributes.name;let n=!!this.Chat()&&this.Chat()[t];return n?n.otherUser.attributes.name:t},t.findPing=function(t=""){let e="@"+this.User().attributes.name;return t.toLowerCase().indexOf(e.toLowerCase())>-1},t.Post=function(t){$(".chat .messages").append(n(t)),this.View().updateChatScroll()},t.Chat=function(t){window.turntable.sendMessage({api:"room.speak",roomid:this.View().roomId,section:this.View().section,text:t})},t.Batch=function(t){if((t=t.split(";;")).length>3)this.Post({head:"Send Error!",body:`Message contains ${t.length}/3 Messages.`});else for(let e of t)this.Chat(e.trim())},t.Share=()=>{window.confirm("Share turnStyles in the room chat?")&&(t.Batch(["Check out turnStyles!","Autobop, Emotes, Themes, & More!","Get it @ https://ts.pixelcrisis.co"].join(";;")),$("#tsWindow").removeClass("active"))}};const n=t=>`\n  <div class="message ${t.type||""}"><em>\n    <span class="subject">${t.head||""}</span>\n    <span class="text">${t.body||""}</span>\n  </em></div>\n`}));let D=window.$tS={};var N;(N=D).now=()=>(new Date).toLocaleTimeString("en-us"),N.cap=t=>t[0].toUpperCase()+t.substring(1),N.classes=(t,e)=>{let n=$("body").hasClass(t);e&&!n&&$("body").addClass(t),n&&!e&&$("body").removeClass(t)},A({})(N),E({})(N),L({})(N),T({})(N),q({})(N),C({})(N),N.on("attach",(function(){this.bindLogs(),this.bindTimer(),this.canNotify()})),(t=>{j({})(t),S({})(t),_({})(t),x({})(t),v({})(t),k({})(t),y({})(t)})(D),(t=>{m({})(t),g({})(t),p({})(t),b({})(t),t.on("attach",(function(){this.bindHotBar(),this.bindWindow()}))})(D),(t=>{u({})(t),h({})(t),f({})(t),d({})(t),c({})(t),l({})(t),r({})(t),i({})(t),a({})(t),s({})(t),o({})(t),n({})(t),e({})(t),t.on("loaded",(function(t){this.loadThemes(t),this.loadClasses(t)})),t.on("attach",(function(){this.autoBop(),this.bindPlaylist()}))})(D);(()=>{if(!window.tsBase){let t=()=>window.open("https://ts.pixelcrisis.co","_blank");return window.confirm(issues)&&t(),!1}D.attach()})()}();